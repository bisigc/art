<div>
    <div class="page-header">
        <h1>Smell Browser</h1>
    </div>
    <div class="well well-sm" ng-if="isAllowed.check(['Admin','Editor'])">
        <button class="btn btn-primary btn-sm" ng-class="{ active:formvisible}" ng-click="showForm(!formvisible)">Add Smell &raquo;</button>
        <div ng-if="formvisible">
            <div ui-view="addSmellView"></div>
        </div>
    </div>
    <div>
        <table id="searchObjResults" class="table table-striped table-hover non-select" popover-popup-delay="1000" popover="Double-Click rows to open Smell in detailed view" popover-trigger="mouseenter" popover-placement="right">
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>AR Appearances</th>
                <th>Group</th>
                <th>Tech Debt Index</th>
                <th></th>
            </tr>
            <tr>
                <td><input ng-model="search.name" placeholder="Enter search criteria" /></td>
                <td><input ng-model="search.description" placeholder="Enter search criteria" /></td>
                <td><input ng-model="search.weight" placeholder="Enter search criteria" /></td>
                <td><input ng-model="search.group.name" placeholder="Enter search criteria" /></td>
                <td><input ng-model="search.tecdebtidx" placeholder="Enter search criteria" /></td>
                <td><button type="button" class="btn btn-warning btn-sm" ng-click="search = []" popover="Clear filter fields" popover-trigger="mouseenter" popover-placement="right">clear</button></td>
            </tr>
            <tr>
                <th><a href ng-click="rname=!rname;order('name', rname)">Name <span ng-show="rname">&#x25B2;</span><span ng-show="!rname">&#x25BC;</span></a></th>
                <th><a href ng-click="rdesc=!rdesc;order('description', rdesc)">Description <span ng-show="rdesc">&#x25B2;</span><span ng-show="!rdesc">&#x25BC;</span></a></th>
                <th><a href ng-click="rweight=!rweight;order('weight', rweight)">AR Appearances <span ng-show="rweight">&#x25B2;</span><span ng-show="!rweight">&#x25BC;</span></a></th>
                <th><a href ng-click="rgroup=!rgroup;order('group.name', rgroup)">Group <span ng-show="rgroup">&#x25B2;</span><span ng-show="!rgroup">&#x25BC;</span></a></th>
                <th><a href ng-click="rdebtidx=!rdebtidx;order('tecdebtidx', rdebtidx)">Tech Debt Index <span ng-show="rdebtidx">&#x25B2;</span><span ng-show="!rdebtidx">&#x25BC;</span></a></th>
                <th></th>
            </tr>
            <tr ng-if="formvisible" class="bg-warning">
                <td>{{smell.name}}&nbsp;</td>
                <td>{{smell.description | limitHtml: 30}}</td>
                <td>{{smell.weight}}</td>
                <td>{{smell.group.name}}</td>
                <td class="dbt-idx-{{smell.tecdebtidx}}">{{smell.tecdebtidx}}</td>
                <td></td>
            </tr>
            <tr ng-repeat="smellItem in smelllist | filter:search" ng-dblclick="$state.go('root.singlesmell',{id: smellItem.id})">
                <td><a ui-sref="root.singlesmell({id: smellItem.id})">{{smellItem.name}}</a></td>
                <td ng-bind-html="smellItem.description | limitHtml: 30"></td>
                <td>{{smellItem.weight}}</td>
                <td>{{smellItem.group.name}}</td>
                <td class="dbt-idx-{{smellItem.tecdebtidx}}">{{smellItem.tecdebtidx}}</td>
                <td><a ui-sref="root.smellbrowser.edit({id: smellItem.id})" ng-if="isAllowed.check(['Admin','Editor'])"><span class="glyphicon glyphicon-pencil"></span></a>&nbsp;<a href ng-click="deleteSmell(smellItem.id)" ng-if="isAllowed.check(['Admin'])"><span class="glyphicon glyphicon-trash"></span></a></td>
            </tr>
        </table>
    </div>
</div>